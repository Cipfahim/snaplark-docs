import{_ as a,o as n,c as i,ag as e}from"./chunks/framework.ClfqGeJY.js";const o=JSON.parse('{"title":"Code Signing","description":"","frontmatter":{},"headers":[],"relativePath":"deployment/code-signing.md","filePath":"deployment/code-signing.md"}'),l={name:"deployment/code-signing.md"};function p(t,s,r,h,k,d){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="code-signing" tabindex="-1">Code Signing <a class="header-anchor" href="#code-signing" aria-label="Permalink to &quot;Code Signing&quot;">​</a></h1><p>This document explains the code signing process for Snaplark on macOS and Windows.</p><h2 id="why-code-signing" tabindex="-1">Why Code Signing? <a class="header-anchor" href="#why-code-signing" aria-label="Permalink to &quot;Why Code Signing?&quot;">​</a></h2><p>Code signing provides:</p><ul><li><strong>User Trust</strong> - Users see verified publisher name</li><li><strong>OS Acceptance</strong> - No &quot;unknown developer&quot; warnings</li><li><strong>Auto-Updates</strong> - Required for Squirrel updates on Windows</li><li><strong>Notarization</strong> - Required for macOS Gatekeeper</li></ul><h2 id="macos-code-signing" tabindex="-1">macOS Code Signing <a class="header-anchor" href="#macos-code-signing" aria-label="Permalink to &quot;macOS Code Signing&quot;">​</a></h2><h3 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h3><p>macOS signing is <strong>automatic</strong> when using Electron Forge with proper configuration:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                      macOS CODE SIGNING (AUTOMATIC)                          │</span></span>
<span class="line"><span>├─────────────────────────────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>│   npm run make                                                               │</span></span>
<span class="line"><span>│        │                                                                     │</span></span>
<span class="line"><span>│        ▼                                                                     │</span></span>
<span class="line"><span>│   ┌───────────────┐    ┌───────────────┐    ┌───────────────┐              │</span></span>
<span class="line"><span>│   │   BUILD APP   │───▶│  CODE SIGN    │───▶│   NOTARIZE    │              │</span></span>
<span class="line"><span>│   │               │    │               │    │               │              │</span></span>
<span class="line"><span>│   │ Snaplark.app  │    │ • Identity    │    │ • Apple ID    │              │</span></span>
<span class="line"><span>│   │               │    │ • Entitlement │    │ • Team ID     │              │</span></span>
<span class="line"><span>│   │               │    │ • Hardened    │    │ • Upload      │              │</span></span>
<span class="line"><span>│   └───────────────┘    └───────────────┘    └───────┬───────┘              │</span></span>
<span class="line"><span>│                                                      │                       │</span></span>
<span class="line"><span>│                              ┌───────────────────────┘                       │</span></span>
<span class="line"><span>│                              ▼                                               │</span></span>
<span class="line"><span>│                        ┌───────────────┐    ┌───────────────┐              │</span></span>
<span class="line"><span>│                        │  STAPLE       │───▶│   CREATE      │              │</span></span>
<span class="line"><span>│                        │  TICKET       │    │   INSTALLERS  │              │</span></span>
<span class="line"><span>│                        │               │    │               │              │</span></span>
<span class="line"><span>│                        │ Embed Apple   │    │ • DMG         │              │</span></span>
<span class="line"><span>│                        │ approval      │    │ • ZIP         │              │</span></span>
<span class="line"><span>│                        └───────────────┘    └───────────────┘              │</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>│   ✅ Result: Signed, notarized, ready for distribution                      │</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[&quot;npm run make&quot;] --&gt; B[&quot;Build App&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C[&quot;Code Sign&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; D[&quot;Upload to Apple&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; E[&quot;Apple Notarizes&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; F[&quot;Staple Ticket&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    F --&gt; G[&quot;Create DMG/ZIP&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style A fill:#4CAF50,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style G fill:#2196F3,color:#fff</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to &quot;Requirements&quot;">​</a></h3><ol><li><strong>Apple Developer Account</strong> ($99/year)</li><li><strong>Developer ID Application Certificate</strong></li><li><strong>App-Specific Password</strong> for notarization</li></ol><h3 id="setup-steps" tabindex="-1">Setup Steps <a class="header-anchor" href="#setup-steps" aria-label="Permalink to &quot;Setup Steps&quot;">​</a></h3><h4 id="_1-create-certificate" tabindex="-1">1. Create Certificate <a class="header-anchor" href="#_1-create-certificate" aria-label="Permalink to &quot;1. Create Certificate&quot;">​</a></h4><ol><li>Go to <a href="https://developer.apple.com" target="_blank" rel="noreferrer">Apple Developer Portal</a></li><li>Navigate to Certificates, Identifiers &amp; Profiles</li><li>Create new certificate: &quot;Developer ID Application&quot;</li><li>Download and install in Keychain</li></ol><h4 id="_2-create-app-specific-password" tabindex="-1">2. Create App-Specific Password <a class="header-anchor" href="#_2-create-app-specific-password" aria-label="Permalink to &quot;2. Create App-Specific Password&quot;">​</a></h4><ol><li>Go to <a href="https://appleid.apple.com" target="_blank" rel="noreferrer">Apple ID</a></li><li>Sign In → Security → App-Specific Passwords</li><li>Generate new password</li><li>Save it securely</li></ol><h4 id="_3-configure-environment" tabindex="-1">3. Configure Environment <a class="header-anchor" href="#_3-configure-environment" aria-label="Permalink to &quot;3. Configure Environment&quot;">​</a></h4><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># .env</span></span>
<span class="line"><span>APPLE_ID=developer@example.com</span></span>
<span class="line"><span>APPLE_PASSWORD=xxxx-xxxx-xxxx-xxxx</span></span>
<span class="line"><span>APPLE_TEAM_ID=2K7985L2RH</span></span>
<span class="line"><span>APP_IDENTITY=&quot;Developer ID Application: Snaplark PTE Limited (2K7985L2RH)&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h3><p><strong><code>forge.config.js</code>:</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">packagerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Code signing</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    osxSign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        identity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">APP_IDENTITY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        hardenedRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;gatekeeper-assess&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        entitlements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;entitlements.plist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;entitlements-inherit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;entitlements.plist&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Notarization</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    osxNotarize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        appleId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">APPLE_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        appleIdPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">APPLE_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        teamId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">APPLE_TEAM_ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="entitlements" tabindex="-1">Entitlements <a class="header-anchor" href="#entitlements" aria-label="Permalink to &quot;Entitlements&quot;">​</a></h3><p><strong><code>entitlements.plist</code>:</strong></p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DOCTYPE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plist</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- Required for Electron --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.apple.security.cs.allow-jit&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- Hardware access --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.apple.security.device.camera&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.apple.security.device.microphone&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.apple.security.device.audio-input&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- Automation --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.apple.security.automation.apple-events&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="build-process" tabindex="-1">Build Process <a class="header-anchor" href="#build-process" aria-label="Permalink to &quot;Build Process&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Full build with signing and notarization</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Output</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># out/make/Snaplark-1.1.4-arm64.dmg (signed, notarized)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># out/make/Snaplark-darwin-arm64-1.1.4.zip (signed, notarized)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="verification" tabindex="-1">Verification <a class="header-anchor" href="#verification" aria-label="Permalink to &quot;Verification&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify code signature</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codesign</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --deep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --strict</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose=2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;out/Snaplark-darwin-arm64/Snaplark.app&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check notarization</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --assess</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose=4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;out/Snaplark-darwin-arm64/Snaplark.app&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># View entitlements</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codesign</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --entitlements</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;out/Snaplark-darwin-arm64/Snaplark.app&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h2 id="windows-code-signing" tabindex="-1">Windows Code Signing <a class="header-anchor" href="#windows-code-signing" aria-label="Permalink to &quot;Windows Code Signing&quot;">​</a></h2><h3 id="overview-1" tabindex="-1">Overview <a class="header-anchor" href="#overview-1" aria-label="Permalink to &quot;Overview&quot;">​</a></h3><p>Windows signing is <strong>NOT automatic</strong> in Snaplark. It requires a separate manual process:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                      WINDOWS CODE SIGNING (MANUAL)                           │</span></span>
<span class="line"><span>├─────────────────────────────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>│   ⚠️  IMPORTANT: This is a SEPARATE manual process after npm run make       │</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>│   STEP 1: Build (Any Platform)          STEP 2: Sign (Windows Only)         │</span></span>
<span class="line"><span>│   ┌───────────────────────────┐         ┌───────────────────────────┐       │</span></span>
<span class="line"><span>│   │                           │         │                           │       │</span></span>
<span class="line"><span>│   │  npm run make             │         │  signtool sign            │       │</span></span>
<span class="line"><span>│   │  --platform=win32         │         │  /f certificate.pfx       │       │</span></span>
<span class="line"><span>│   │                           │────────▶│  /p password              │       │</span></span>
<span class="line"><span>│   │  Output: UNSIGNED .exe    │         │  /tr timestamp.digicert   │       │</span></span>
<span class="line"><span>│   │                           │         │                           │       │</span></span>
<span class="line"><span>│   └───────────────────────────┘         │  Output: SIGNED .exe      │       │</span></span>
<span class="line"><span>│                                         │                           │       │</span></span>
<span class="line"><span>│   Can run on macOS/Linux               │  MUST run on Windows      │       │</span></span>
<span class="line"><span>│                                         │  or use cloud signing     │       │</span></span>
<span class="line"><span>│                                         └───────────────────────────┘       │</span></span>
<span class="line"><span>│                                                      │                       │</span></span>
<span class="line"><span>│                                                      ▼                       │</span></span>
<span class="line"><span>│                                         ┌───────────────────────────┐       │</span></span>
<span class="line"><span>│                                         │                           │       │</span></span>
<span class="line"><span>│                                         │  Manual upload to S3      │       │</span></span>
<span class="line"><span>│                                         │  or CI/CD pipeline        │       │</span></span>
<span class="line"><span>│                                         │                           │       │</span></span>
<span class="line"><span>│                                         └───────────────────────────┘       │</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>│   WHY MANUAL?                                                                │</span></span>
<span class="line"><span>│   • Electron Forge on macOS/Linux cannot access Windows certificates        │</span></span>
<span class="line"><span>│   • EV certificates often require hardware tokens (USB)                      │</span></span>
<span class="line"><span>│   • Cloud signing services require specific integration                      │</span></span>
<span class="line"><span>│                                                                              │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[&quot;npm run make\\n(Any Platform)&quot;] --&gt; B[&quot;Unsigned EXE&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C[&quot;Transfer to\\nWindows Machine&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; D[&quot;Sign with\\nSignTool&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; E[&quot;Verify\\nSignature&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; F[&quot;Upload to S3&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style A fill:#FFC107,color:#000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style D fill:#FF5722,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style F fill:#2196F3,color:#fff</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="requirements-1" tabindex="-1">Requirements <a class="header-anchor" href="#requirements-1" aria-label="Permalink to &quot;Requirements&quot;">​</a></h3><ol><li><strong>Code Signing Certificate</strong> (purchased from certificate authority) <ul><li>DigiCert, Sectigo, GlobalSign, etc.</li><li>EV certificate recommended for SmartScreen reputation</li></ul></li><li><strong>SignTool</strong> (from Windows SDK)</li><li><strong>Certificate file</strong> (.pfx) and password</li></ol><h3 id="why-manual" tabindex="-1">Why Manual? <a class="header-anchor" href="#why-manual" aria-label="Permalink to &quot;Why Manual?&quot;">​</a></h3><p>Electron Forge on macOS/Linux cannot directly use Windows certificates. The signing must be done:</p><ul><li>On a Windows machine, OR</li><li>Using a cloud signing service, OR</li><li>Using a CI/CD pipeline on Windows</li></ul><h3 id="process" tabindex="-1">Process <a class="header-anchor" href="#process" aria-label="Permalink to &quot;Process&quot;">​</a></h3><h4 id="step-1-build-unsigned" tabindex="-1">Step 1: Build Unsigned <a class="header-anchor" href="#step-1-build-unsigned" aria-label="Permalink to &quot;Step 1: Build Unsigned&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run on any platform</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform=win32</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Output: out/make/squirrel.windows/x64/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ├── Snaplark-1.1.4 Setup.exe (unsigned)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># └── nupkg files</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="step-2-sign-the-executable" tabindex="-1">Step 2: Sign the Executable <a class="header-anchor" href="#step-2-sign-the-executable" aria-label="Permalink to &quot;Step 2: Sign the Executable&quot;">​</a></h4><p>On a Windows machine:</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Using SignTool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signtool sign </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;certificate.pfx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tr http:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timestamp.digicert.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">td sha256 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fd sha256 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Snaplark-1.1.4 Setup.exe&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify signature</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signtool verify </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pa </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Snaplark-1.1.4 Setup.exe&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Or using a cloud signing service (e.g., Azure SignTool):</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Azure SignTool example</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AzureSignTool sign </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kvu </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://vault.azure.net&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kvi </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;client-id&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kvt </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tenant-id&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kvs </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;client-secret&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kvc </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cert-name&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tr http:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timestamp.digicert.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Snaplark-1.1.4 Setup.exe&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="step-3-publish" tabindex="-1">Step 3: Publish <a class="header-anchor" href="#step-3-publish" aria-label="Permalink to &quot;Step 3: Publish&quot;">​</a></h4><p>After signing, manually upload to S3 or use a custom script.</p><h3 id="certificate-types" tabindex="-1">Certificate Types <a class="header-anchor" href="#certificate-types" aria-label="Permalink to &quot;Certificate Types&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Type</th><th>Cost</th><th>SmartScreen</th><th>Recommended</th></tr></thead><tbody><tr><td>Standard OV</td><td>$100-300/yr</td><td>Builds reputation</td><td>Development</td></tr><tr><td>EV (Extended)</td><td>$300-600/yr</td><td>Instant trust</td><td>Production</td></tr></tbody></table><p><strong>EV Certificate Benefits:</strong></p><ul><li>Immediate SmartScreen reputation</li><li>No &quot;unknown publisher&quot; warnings</li><li>Required for kernel-mode drivers</li></ul><h3 id="alternative-ci-cd-signing" tabindex="-1">Alternative: CI/CD Signing <a class="header-anchor" href="#alternative-ci-cd-signing" aria-label="Permalink to &quot;Alternative: CI/CD Signing&quot;">​</a></h3><p>For automated builds, use GitHub Actions with Windows runner:</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .github/workflows/build.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build-windows</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">windows-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm run make</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Sign</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          CERTIFICATE_BASE64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.CERTIFICATE_BASE64 }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          CERTIFICATE_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.CERTIFICATE_PASSWORD }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          # Decode certificate</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          $certBytes = [Convert]::FromBase64String($env:CERTIFICATE_BASE64)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          [IO.File]::WriteAllBytes(&quot;cert.pfx&quot;, $certBytes)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          # Sign</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          signtool sign /f cert.pfx /p $env:CERTIFICATE_PASSWORD /tr http://timestamp.digicert.com /td sha256 /fd sha256 &quot;out/make/squirrel.windows/x64/*.exe&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Upload artifacts</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/upload-artifact@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">windows-installer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">out/make/squirrel.windows/x64/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><hr><h2 id="comparison" tabindex="-1">Comparison <a class="header-anchor" href="#comparison" aria-label="Permalink to &quot;Comparison&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Aspect</th><th>macOS</th><th>Windows</th></tr></thead><tbody><tr><td>Built-in to Forge</td><td>Yes</td><td>No</td></tr><tr><td>Automatic</td><td>Yes</td><td>Manual</td></tr><tr><td>Certificate Cost</td><td>$99/yr (Apple Dev)</td><td>$100-600/yr</td></tr><tr><td>Notarization</td><td>Required</td><td>N/A</td></tr><tr><td>SmartScreen</td><td>N/A</td><td>Recommended</td></tr></tbody></table><hr><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="macos-developer-cannot-be-verified" tabindex="-1">macOS: &quot;Developer cannot be verified&quot; <a class="header-anchor" href="#macos-developer-cannot-be-verified" aria-label="Permalink to &quot;macOS: &quot;Developer cannot be verified&quot;&quot;">​</a></h3><ol><li>Ensure certificate is &quot;Developer ID Application&quot; (not &quot;Mac Distribution&quot;)</li><li>Check certificate isn&#39;t expired</li><li>Verify Team ID matches certificate</li></ol><h3 id="macos-notarization-fails" tabindex="-1">macOS: Notarization Fails <a class="header-anchor" href="#macos-notarization-fails" aria-label="Permalink to &quot;macOS: Notarization Fails&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: Apple returned errors for this request</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol><li>Check hardened runtime is enabled</li><li>Verify entitlements are correct</li><li>Ensure no unsigned libraries</li><li>Check Apple Developer account status</li></ol><h3 id="windows-smartscreen-warning" tabindex="-1">Windows: SmartScreen Warning <a class="header-anchor" href="#windows-smartscreen-warning" aria-label="Permalink to &quot;Windows: SmartScreen Warning&quot;">​</a></h3><ol><li>Use EV certificate for instant trust</li><li>Or build reputation over time with OV certificate</li><li>Submit app to Microsoft for analysis</li></ol><h3 id="windows-invalid-signature" tabindex="-1">Windows: Invalid Signature <a class="header-anchor" href="#windows-invalid-signature" aria-label="Permalink to &quot;Windows: Invalid Signature&quot;">​</a></h3><ol><li>Verify certificate hasn&#39;t expired</li><li>Check timestamp server is accessible</li><li>Ensure .pfx file is valid</li></ol><hr><h2 id="certificate-management" tabindex="-1">Certificate Management <a class="header-anchor" href="#certificate-management" aria-label="Permalink to &quot;Certificate Management&quot;">​</a></h2><h3 id="renewing-macos-certificate" tabindex="-1">Renewing macOS Certificate <a class="header-anchor" href="#renewing-macos-certificate" aria-label="Permalink to &quot;Renewing macOS Certificate&quot;">​</a></h3><ol><li>Create new &quot;Developer ID Application&quot; certificate</li><li>Download and install</li><li>Update <code>APP_IDENTITY</code> if name changed</li><li>Rebuild and publish</li></ol><h3 id="renewing-windows-certificate" tabindex="-1">Renewing Windows Certificate <a class="header-anchor" href="#renewing-windows-certificate" aria-label="Permalink to &quot;Renewing Windows Certificate&quot;">​</a></h3><ol><li>Purchase renewal from CA</li><li>Download new .pfx file</li><li>Update signing scripts with new certificate</li><li>Re-sign and publish</li></ol><hr><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="/snaplark-docs/deployment/publishing.html">Publishing</a> - Upload to S3</li><li><a href="/snaplark-docs/deployment/auto-updates.html">Auto Updates</a> - Update delivery</li><li><a href="/snaplark-docs/deployment/build-process.html">Build Process</a> - Full build guide</li></ul>`,80)])])}const u=a(l,[["render",p]]);export{o as __pageData,u as default};
